'use client';
import{__rest as e}from"tslib";import r,{useRef as t,Children as a,useMemo as o,isValidElement as l}from"react";import n from"../../../assets/ArrowDownHeadIcon.js";import s from"../../../assets/XCircleIcon.js";import{tremorTwMerge as d}from"../../../lib/tremorTwMerge.js";import{makeClassName as m}from"../../../lib/utils.js";import{constructValueToNameMapping as c,getSelectButtonColors as i,hasValue as u}from"../selectUtils.js";import{Listbox as p,Transition as b}from"@headlessui/react";import f from"../../../hooks/useInternalState.js";const h=m("Select"),k=r.forwardRef(((m,k)=>{const{defaultValue:v="",value:w,onValueChange:y,placeholder:N="Select...",disabled:g=!1,icon:x,enableClear:E=!1,required:C,children:j,name:V,error:I=!1,errorMessage:D,className:S,id:T}=m,F=e(m,["defaultValue","value","onValueChange","placeholder","disabled","icon","enableClear","required","children","name","error","errorMessage","className","id"]),M=t(null),q=a.toArray(j),[A,O]=f(v,w),z=x,B=o((()=>{const e=r.Children.toArray(j).filter(l);return c(e)}),[j]);return"development"===process.env.NODE_ENV&&console.info("The Select is also available as a copy-and-paste component. Visit https://tremor.so/docs/inputs/select (This is only shown in development)"),r.createElement("div",{className:d("w-full min-w-[10rem] text-tremor-default",S)},r.createElement("div",{className:"relative"},r.createElement("select",{title:"select-hidden",required:C,className:d("h-full w-full absolute left-0 top-0 -z-10 opacity-0"),value:A,onChange:e=>{e.preventDefault()},name:V,disabled:g,id:T,onFocus:()=>{const e=M.current;e&&e.focus()}},r.createElement("option",{className:"hidden",value:"",disabled:!0,hidden:!0},N),q.map((e=>{const t=e.props.value,a=e.props.children;return r.createElement("option",{className:"hidden",key:t,value:t},a)}))),r.createElement(p,Object.assign({as:"div",ref:k,defaultValue:A,value:A,onChange:e=>{null==y||y(e),O(e)},disabled:g,id:T},F),(({value:e})=>{var t;return r.createElement(r.Fragment,null,r.createElement(p.Button,{ref:M,className:d("w-full outline-none text-left whitespace-nowrap truncate rounded-tremor-default focus:ring-2 transition duration-100 border pr-8 py-2","border-tremor-border shadow-tremor-input focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",z?"pl-10":"pl-3",i(u(e),g,I))},z&&r.createElement("span",{className:d("absolute inset-y-0 left-0 flex items-center ml-px pl-2.5")},r.createElement(z,{className:d(h("Icon"),"flex-none h-5 w-5","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle")})),r.createElement("span",{className:"w-[90%] block truncate"},e&&null!==(t=B.get(e))&&void 0!==t?t:N),r.createElement("span",{className:d("absolute inset-y-0 right-0 flex items-center mr-3")},r.createElement(n,{className:d(h("arrowDownIcon"),"flex-none h-5 w-5","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle")}))),E&&A?r.createElement("button",{type:"button",className:d("absolute inset-y-0 right-0 flex items-center mr-8"),onClick:e=>{e.preventDefault(),O(""),null==y||y("")}},r.createElement(s,{className:d(h("clearIcon"),"flex-none h-4 w-4","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle")})):null,r.createElement(b,{className:"absolute z-10 w-full",enter:"transition ease duration-100 transform",enterFrom:"opacity-0 -translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition ease duration-100 transform",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4"},r.createElement(p.Options,{className:d("divide-y overflow-y-auto outline-none rounded-tremor-default max-h-[228px] left-0 border my-1","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown")},j)))}))),I&&D?r.createElement("p",{className:d("errorMessage","text-sm text-rose-500 mt-1")},D):null)}));k.displayName="Select";export{k as default};
