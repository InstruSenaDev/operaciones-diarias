'use client';
import{__rest as e}from"tslib";import t,{useState as o,Fragment as a}from"react";import{ResponsiveContainer as r,LineChart as i,CartesianGrid as n,XAxis as l,Label as s,YAxis as d,Tooltip as c,Legend as m,Line as p,Dot as u}from"recharts";import k from"../common/ChartLegend.js";import y from"../common/ChartTooltip.js";import v from"../common/NoData.js";import{constructCategoryColors as h,hasOnlyOneValueForThisKey as f,getYAxisDomain as g}from"../common/utils.js";import{BaseColors as x}from"../../../lib/constants.js";import{themeColorRange as b,colorPalette as L}from"../../../lib/theme.js";import{tremorTwMerge as E}from"../../../lib/tremorTwMerge.js";import{getColorClassNames as w,defaultValueFormatter as N}from"../../../lib/utils.js";const T=t.forwardRef(((T,A)=>{const{data:j=[],categories:C=[],index:K,colors:D=b,valueFormatter:V=N,startEndOnly:G=!1,showXAxis:O=!0,showYAxis:W=!0,yAxisWidth:S=56,intervalType:F="equidistantPreserveStart",animationDuration:X=900,showAnimation:M=!1,showTooltip:P=!0,showLegend:z=!0,showGridLines:Y=!0,autoMinValue:q=!1,curveType:B="linear",minValue:H,maxValue:R,connectNulls:_=!1,allowDecimals:I=!0,noDataText:J,className:Q,onValueChange:U,enableLegendSlider:Z=!1,customTooltip:$,rotateLabelX:ee,padding:te=(O||W?{left:20,right:20}:{left:0,right:0}),tickGap:oe=5,xAxisLabel:ae,yAxisLabel:re}=T,ie=e(T,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","padding","tickGap","xAxisLabel","yAxisLabel"]),ne=$,[le,se]=o(60),[de,ce]=o(void 0),[me,pe]=o(void 0),ue=h(C,D),ke=g(q,H,R),ye=!!U;function ve(e){ye&&(e===me&&!de||f(j,e)&&de&&de.dataKey===e?(pe(void 0),null==U||U(null)):(pe(e),null==U||U({eventType:"category",categoryClicked:e})),ce(void 0))}return"development"===process.env.NODE_ENV&&console.info("The LineChart is also available as a copy-and-paste component. Visit https://tremor.so/docs/visualizations/line-chart (This is only shown in development)"),t.createElement("div",Object.assign({ref:A,className:E("w-full h-80",Q)},ie),t.createElement(r,{className:"h-full w-full"},(null==j?void 0:j.length)?t.createElement(i,{data:j,onClick:ye&&(me||de)?()=>{ce(void 0),pe(void 0),null==U||U(null)}:void 0,margin:{bottom:ae?30:void 0,left:re?20:void 0,right:re?5:void 0,top:5}},Y?t.createElement(n,{className:E("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,t.createElement(l,{padding:te,hide:!O,dataKey:K,interval:G?"preserveStartEnd":F,tick:{transform:"translate(0, 6)"},ticks:G?[j[0][K],j[j.length-1][K]]:void 0,fill:"",stroke:"",className:E("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,minTickGap:oe,angle:null==ee?void 0:ee.angle,dy:null==ee?void 0:ee.verticalShift,height:null==ee?void 0:ee.xAxisHeight},ae&&t.createElement(s,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},ae)),t.createElement(d,{width:S,hide:!W,axisLine:!1,tickLine:!1,type:"number",domain:ke,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:E("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:V,allowDecimals:I},re&&t.createElement(s,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},re)),t.createElement(c,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:P?({active:e,payload:o,label:a})=>ne?t.createElement(ne,{payload:null==o?void 0:o.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=ue.get(e.dataKey))&&void 0!==t?t:x.Gray})})),active:e,label:a}):t.createElement(y,{active:e,payload:o,label:a,valueFormatter:V,categoryColors:ue}):t.createElement(t.Fragment,null),position:{y:0}}),z?t.createElement(m,{verticalAlign:"top",height:le,content:({payload:e})=>k({payload:e},ue,se,me,ye?e=>ve(e):void 0,Z)}):null,C.map((e=>{var o;return t.createElement(p,{className:E(w(null!==(o=ue.get(e))&&void 0!==o?o:x.Gray,L.text).strokeColor),strokeOpacity:de||me&&me!==e?.3:1,activeDot:e=>{var o;const{cx:a,cy:r,stroke:i,strokeLinecap:n,strokeLinejoin:l,strokeWidth:s,dataKey:d}=e;return t.createElement(u,{className:E("stroke-tremor-background dark:stroke-dark-tremor-background",U?"cursor-pointer":"",w(null!==(o=ue.get(d))&&void 0!==o?o:x.Gray,L.text).fillColor),cx:a,cy:r,r:5,fill:"",stroke:i,strokeLinecap:n,strokeLinejoin:l,strokeWidth:s,onClick:(t,o)=>function(e,t){t.stopPropagation(),ye&&(e.index===(null==de?void 0:de.index)&&e.dataKey===(null==de?void 0:de.dataKey)||f(j,e.dataKey)&&me&&me===e.dataKey?(pe(void 0),ce(void 0),null==U||U(null)):(pe(e.dataKey),ce({index:e.index,dataKey:e.dataKey}),null==U||U(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,o)})},dot:o=>{var r;const{stroke:i,strokeLinecap:n,strokeLinejoin:l,strokeWidth:s,cx:d,cy:c,dataKey:m,index:p}=o;return f(j,e)&&!(de||me&&me!==e)||(null==de?void 0:de.index)===p&&(null==de?void 0:de.dataKey)===e?t.createElement(u,{key:p,cx:d,cy:c,r:5,stroke:i,fill:"",strokeLinecap:n,strokeLinejoin:l,strokeWidth:s,className:E("stroke-tremor-background dark:stroke-dark-tremor-background",U?"cursor-pointer":"",w(null!==(r=ue.get(m))&&void 0!==r?r:x.Gray,L.text).fillColor)}):t.createElement(a,{key:p})},key:e,name:e,type:B,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:M,animationDuration:X,connectNulls:_})})),U?C.map((e=>t.createElement(p,{className:E("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:B,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:_,onClick:(e,t)=>{t.stopPropagation();const{name:o}=e;ve(o)}}))):null):t.createElement(v,{noDataText:J})))}));T.displayName="LineChart";export{T as default};
