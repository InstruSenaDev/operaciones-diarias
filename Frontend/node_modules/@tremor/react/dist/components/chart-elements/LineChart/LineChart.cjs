'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),o=require("../common/ChartLegend.cjs"),r=require("../common/ChartTooltip.cjs"),l=require("../common/NoData.cjs"),n=require("../common/utils.cjs"),i=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),d=require("../../../lib/tremorTwMerge.cjs"),c=require("../../../lib/utils.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(t);const k=m.default.forwardRef(((u,k)=>{const{data:p=[],categories:y=[],index:f,colors:h=s.themeColorRange,valueFormatter:g=c.defaultValueFormatter,startEndOnly:v=!1,showXAxis:x=!0,showYAxis:L=!0,yAxisWidth:b=56,intervalType:T="equidistantPreserveStart",animationDuration:C=900,showAnimation:w=!1,showTooltip:E=!0,showLegend:N=!0,showGridLines:A=!0,autoMinValue:K=!1,curveType:j="linear",minValue:D,maxValue:O,connectNulls:V=!1,allowDecimals:q=!0,noDataText:M,className:F,onValueChange:G,enableLegendSlider:S=!1,customTooltip:W,rotateLabelX:P,padding:B=(x||L?{left:20,right:20}:{left:0,right:0}),tickGap:X=5,xAxisLabel:Y,yAxisLabel:R}=u,_=e.__rest(u,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","padding","tickGap","xAxisLabel","yAxisLabel"]),z=W,[H,I]=t.useState(60),[J,Q]=t.useState(void 0),[U,Z]=t.useState(void 0),$=n.constructCategoryColors(y,h),ee=n.getYAxisDomain(K,D,O),te=!!G;function ae(e){te&&(e===U&&!J||n.hasOnlyOneValueForThisKey(p,e)&&J&&J.dataKey===e?(Z(void 0),null==G||G(null)):(Z(e),null==G||G({eventType:"category",categoryClicked:e})),Q(void 0))}return"development"===process.env.NODE_ENV&&console.info("The LineChart is also available as a copy-and-paste component. Visit https://tremor.so/docs/visualizations/line-chart (This is only shown in development)"),m.default.createElement("div",Object.assign({ref:k,className:d.tremorTwMerge("w-full h-80",F)},_),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==p?void 0:p.length)?m.default.createElement(a.LineChart,{data:p,onClick:te&&(U||J)?()=>{Q(void 0),Z(void 0),null==G||G(null)}:void 0,margin:{bottom:Y?30:void 0,left:R?20:void 0,right:R?5:void 0,top:5}},A?m.default.createElement(a.CartesianGrid,{className:d.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,m.default.createElement(a.XAxis,{padding:B,hide:!x,dataKey:f,interval:v?"preserveStartEnd":T,tick:{transform:"translate(0, 6)"},ticks:v?[p[0][f],p[p.length-1][f]]:void 0,fill:"",stroke:"",className:d.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,minTickGap:X,angle:null==P?void 0:P.angle,dy:null==P?void 0:P.verticalShift,height:null==P?void 0:P.xAxisHeight},Y&&m.default.createElement(a.Label,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},Y)),m.default.createElement(a.YAxis,{width:b,hide:!L,axisLine:!1,tickLine:!1,type:"number",domain:ee,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:d.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:g,allowDecimals:q},R&&m.default.createElement(a.Label,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},R)),m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:E?({active:e,payload:t,label:a})=>z?m.default.createElement(z,{payload:null==t?void 0:t.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=$.get(e.dataKey))&&void 0!==t?t:i.BaseColors.Gray})})),active:e,label:a}):m.default.createElement(r.default,{active:e,payload:t,label:a,valueFormatter:g,categoryColors:$}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),N?m.default.createElement(a.Legend,{verticalAlign:"top",height:H,content:({payload:e})=>o({payload:e},$,I,U,te?e=>ae(e):void 0,S)}):null,y.map((e=>{var o;return m.default.createElement(a.Line,{className:d.tremorTwMerge(c.getColorClassNames(null!==(o=$.get(e))&&void 0!==o?o:i.BaseColors.Gray,s.colorPalette.text).strokeColor),strokeOpacity:J||U&&U!==e?.3:1,activeDot:e=>{var t;const{cx:o,cy:r,stroke:l,strokeLinecap:u,strokeLinejoin:k,strokeWidth:y,dataKey:f}=e;return m.default.createElement(a.Dot,{className:d.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",G?"cursor-pointer":"",c.getColorClassNames(null!==(t=$.get(f))&&void 0!==t?t:i.BaseColors.Gray,s.colorPalette.text).fillColor),cx:o,cy:r,r:5,fill:"",stroke:l,strokeLinecap:u,strokeLinejoin:k,strokeWidth:y,onClick:(t,a)=>function(e,t){t.stopPropagation(),te&&(e.index===(null==J?void 0:J.index)&&e.dataKey===(null==J?void 0:J.dataKey)||n.hasOnlyOneValueForThisKey(p,e.dataKey)&&U&&U===e.dataKey?(Z(void 0),Q(void 0),null==G||G(null)):(Z(e.dataKey),Q({index:e.index,dataKey:e.dataKey}),null==G||G(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,a)})},dot:o=>{var r;const{stroke:l,strokeLinecap:u,strokeLinejoin:k,strokeWidth:y,cx:f,cy:h,dataKey:g,index:v}=o;return n.hasOnlyOneValueForThisKey(p,e)&&!(J||U&&U!==e)||(null==J?void 0:J.index)===v&&(null==J?void 0:J.dataKey)===e?m.default.createElement(a.Dot,{key:v,cx:f,cy:h,r:5,stroke:l,fill:"",strokeLinecap:u,strokeLinejoin:k,strokeWidth:y,className:d.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",G?"cursor-pointer":"",c.getColorClassNames(null!==(r=$.get(g))&&void 0!==r?r:i.BaseColors.Gray,s.colorPalette.text).fillColor)}):m.default.createElement(t.Fragment,{key:v})},key:e,name:e,type:j,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:w,animationDuration:C,connectNulls:V})})),G?y.map((e=>m.default.createElement(a.Line,{className:d.tremorTwMerge("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:j,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:V,onClick:(e,t)=>{t.stopPropagation();const{name:a}=e;ae(a)}}))):null):m.default.createElement(l,{noDataText:M})))}));k.displayName="LineChart",module.exports=k;
