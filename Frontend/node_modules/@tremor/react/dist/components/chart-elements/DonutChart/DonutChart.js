'use client';
import{__rest as e}from"tslib";import{BaseColors as t}from"../../../lib/constants.js";import{themeColorRange as o}from"../../../lib/theme.js";import{tremorTwMerge as a}from"../../../lib/tremorTwMerge.js";import{defaultValueFormatter as n}from"../../../lib/utils.js";import l,{useEffect as r}from"react";import{ResponsiveContainer as i,PieChart as s,Pie as m,Tooltip as c,Sector as u}from"recharts";import d from"../common/NoData.js";import{DonutChartTooltip as p}from"./DonutChartTooltip.js";import{parseLabelInput as v,parseData as h}from"./inputParser.js";const f=e=>{const{cx:t,cy:o,innerRadius:a,outerRadius:n,startAngle:r,endAngle:i,className:s}=e;return l.createElement("g",null,l.createElement(u,{cx:t,cy:o,innerRadius:a,outerRadius:n,startAngle:r,endAngle:i,className:s,fill:"",opacity:.3,style:{outline:"none"}}))},y=l.forwardRef(((u,y)=>{const{data:g=[],category:b="value",index:A="name",colors:E=o,variant:x="donut",valueFormatter:j=n,label:k,showLabel:w=!0,animationDuration:N=900,showAnimation:T=!1,showTooltip:D=!0,noDataText:C,onValueChange:R,customTooltip:O,className:F}=u,S=e(u,["data","category","index","colors","variant","valueFormatter","label","showLabel","animationDuration","showAnimation","showTooltip","noDataText","onValueChange","customTooltip","className"]),V=O,L="donut"==x,K=v(k,j,g,b),[P,q]=l.useState(void 0),z=!!R;return r((()=>{const e=document.querySelectorAll(".recharts-pie-sector");e&&e.forEach((e=>{e.setAttribute("style","outline: none")}))}),[P]),"development"===process.env.NODE_ENV&&console.info("The DonutChart is also available as a copy-and-paste component. Visit https://tremor.so/docs/visualizations/donut-chart (This is only shown in development)"),l.createElement("div",Object.assign({ref:y,className:a("w-full h-40",F)},S),l.createElement(i,{className:"h-full w-full"},(null==g?void 0:g.length)?l.createElement(s,{onClick:z&&P?()=>{q(void 0),null==R||R(null)}:void 0,margin:{top:0,left:0,right:0,bottom:0}},w&&L?l.createElement("text",{className:a("fill-tremor-content-emphasis","dark:fill-dark-tremor-content-emphasis"),x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle"},K):null,l.createElement(m,{className:a("stroke-tremor-background dark:stroke-dark-tremor-background",R?"cursor-pointer":"cursor-default"),data:h(g,E),cx:"50%",cy:"50%",startAngle:90,endAngle:-270,innerRadius:L?"75%":"0%",outerRadius:"100%",stroke:"",strokeLinejoin:"round",dataKey:b,nameKey:A,isAnimationActive:T,animationDuration:N,onClick:function(e,t,o){o.stopPropagation(),z&&(P===t?(q(void 0),null==R||R(null)):(q(t),null==R||R(Object.assign({eventType:"slice"},e.payload.payload))))},activeIndex:P,inactiveShape:f,style:{outline:"none"}}),l.createElement(c,{wrapperStyle:{outline:"none"},isAnimationActive:!1,content:D?({active:e,payload:o})=>{var a;return V?l.createElement(V,{payload:null==o?void 0:o.map((e=>{var a,n,l;return Object.assign(Object.assign({},e),{color:null!==(l=null===(n=null===(a=null==o?void 0:o[0])||void 0===a?void 0:a.payload)||void 0===n?void 0:n.color)&&void 0!==l?l:t.Gray})})),active:e,label:null===(a=null==o?void 0:o[0])||void 0===a?void 0:a.name}):l.createElement(p,{active:e,payload:o,valueFormatter:j})}:l.createElement(l.Fragment,null)})):l.createElement(d,{noDataText:C})))}));y.displayName="DonutChart";export{y as default};
