'use client';
"use strict";var e=require("tslib"),t=require("../../../lib/constants.cjs"),a=require("../../../lib/theme.cjs"),o=require("../../../lib/tremorTwMerge.cjs"),l=require("../../../lib/utils.cjs"),n=require("react"),r=require("recharts"),i=require("../common/NoData.cjs"),s=require("./DonutChartTooltip.cjs"),u=require("./inputParser.cjs");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=c(n);const m=e=>{const{cx:t,cy:a,innerRadius:o,outerRadius:l,startAngle:n,endAngle:i,className:s}=e;return d.default.createElement("g",null,d.default.createElement(r.Sector,{cx:t,cy:a,innerRadius:o,outerRadius:l,startAngle:n,endAngle:i,className:s,fill:"",opacity:.3,style:{outline:"none"}}))},p=d.default.forwardRef(((c,p)=>{const{data:v=[],category:f="value",index:h="name",colors:g=a.themeColorRange,variant:y="donut",valueFormatter:b=l.defaultValueFormatter,label:T,showLabel:E=!0,animationDuration:w=900,showAnimation:A=!1,showTooltip:j=!0,noDataText:x,onValueChange:D,customTooltip:k,className:C}=c,N=e.__rest(c,["data","category","index","colors","variant","valueFormatter","label","showLabel","animationDuration","showAnimation","showTooltip","noDataText","onValueChange","customTooltip","className"]),q=k,R="donut"==y,F=u.parseLabelInput(T,b,v,f),[O,S]=d.default.useState(void 0),V=!!D;return n.useEffect((()=>{const e=document.querySelectorAll(".recharts-pie-sector");e&&e.forEach((e=>{e.setAttribute("style","outline: none")}))}),[O]),"development"===process.env.NODE_ENV&&console.info("The DonutChart is also available as a copy-and-paste component. Visit https://tremor.so/docs/visualizations/donut-chart (This is only shown in development)"),d.default.createElement("div",Object.assign({ref:p,className:o.tremorTwMerge("w-full h-40",C)},N),d.default.createElement(r.ResponsiveContainer,{className:"h-full w-full"},(null==v?void 0:v.length)?d.default.createElement(r.PieChart,{onClick:V&&O?()=>{S(void 0),null==D||D(null)}:void 0,margin:{top:0,left:0,right:0,bottom:0}},E&&R?d.default.createElement("text",{className:o.tremorTwMerge("fill-tremor-content-emphasis","dark:fill-dark-tremor-content-emphasis"),x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle"},F):null,d.default.createElement(r.Pie,{className:o.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",D?"cursor-pointer":"cursor-default"),data:u.parseData(v,g),cx:"50%",cy:"50%",startAngle:90,endAngle:-270,innerRadius:R?"75%":"0%",outerRadius:"100%",stroke:"",strokeLinejoin:"round",dataKey:f,nameKey:h,isAnimationActive:A,animationDuration:w,onClick:function(e,t,a){a.stopPropagation(),V&&(O===t?(S(void 0),null==D||D(null)):(S(t),null==D||D(Object.assign({eventType:"slice"},e.payload.payload))))},activeIndex:O,inactiveShape:m,style:{outline:"none"}}),d.default.createElement(r.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,content:j?({active:e,payload:a})=>{var o;return q?d.default.createElement(q,{payload:null==a?void 0:a.map((e=>{var o,l,n;return Object.assign(Object.assign({},e),{color:null!==(n=null===(l=null===(o=null==a?void 0:a[0])||void 0===o?void 0:o.payload)||void 0===l?void 0:l.color)&&void 0!==n?n:t.BaseColors.Gray})})),active:e,label:null===(o=null==a?void 0:a[0])||void 0===o?void 0:o.name}):d.default.createElement(s.DonutChartTooltip,{active:e,payload:a,valueFormatter:b})}:d.default.createElement(d.default.Fragment,null)})):d.default.createElement(i,{noDataText:x})))}));p.displayName="DonutChart",module.exports=p;
