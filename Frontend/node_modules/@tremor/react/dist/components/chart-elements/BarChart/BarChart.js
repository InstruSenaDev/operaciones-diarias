'use client';
import{__rest as e}from"tslib";import{BaseColors as t}from"../../../lib/constants.js";import{themeColorRange as a,colorPalette as o}from"../../../lib/theme.js";import{tremorTwMerge as l}from"../../../lib/tremorTwMerge.js";import{getColorClassNames as i,defaultValueFormatter as r}from"../../../lib/utils.js";import n,{useState as s}from"react";import{ResponsiveContainer as m,BarChart as c,CartesianGrid as d,XAxis as p,Label as u,YAxis as v,Tooltip as h,Legend as f,Bar as g}from"recharts";import y from"../common/ChartLegend.js";import k from"../common/ChartTooltip.js";import b from"../common/NoData.js";import{constructCategoryColors as x,deepEqual as w,getYAxisDomain as E}from"../common/utils.js";const L=n.forwardRef(((L,A)=>{const{data:j=[],categories:N=[],index:T,colors:C=a,valueFormatter:O=r,layout:D="horizontal",stack:G=!1,relative:S=!1,startEndOnly:V=!1,animationDuration:F=900,showAnimation:K=!1,showXAxis:z=!0,showYAxis:B=!0,yAxisWidth:M=56,intervalType:P="equidistantPreserveStart",showTooltip:X=!0,showLegend:H=!0,showGridLines:W=!0,autoMinValue:Y=!1,minValue:q,maxValue:I,allowDecimals:R=!0,noDataText:$,onValueChange:_,enableLegendSlider:J=!1,customTooltip:Q,rotateLabelX:U,barCategoryGap:Z,tickGap:ee=5,xAxisLabel:te,yAxisLabel:ae,className:oe,padding:le=(z||B?{left:20,right:20}:{left:0,right:0})}=L,ie=e(L,["data","categories","index","colors","valueFormatter","layout","stack","relative","startEndOnly","animationDuration","showAnimation","showXAxis","showYAxis","yAxisWidth","intervalType","showTooltip","showLegend","showGridLines","autoMinValue","minValue","maxValue","allowDecimals","noDataText","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","barCategoryGap","tickGap","xAxisLabel","yAxisLabel","className","padding"]),re=Q,[ne,se]=s(60),me=x(N,C),[ce,de]=n.useState(void 0),[pe,ue]=s(void 0),ve=!!_;function he(e,t,a){var o,l,i,r;a.stopPropagation(),_&&(w(ce,Object.assign(Object.assign({},e.payload),{value:e.value}))?(ue(void 0),de(void 0),null==_||_(null)):(ue(null===(l=null===(o=e.tooltipPayload)||void 0===o?void 0:o[0])||void 0===l?void 0:l.dataKey),de(Object.assign(Object.assign({},e.payload),{value:e.value})),null==_||_(Object.assign({eventType:"bar",categoryClicked:null===(r=null===(i=e.tooltipPayload)||void 0===i?void 0:i[0])||void 0===r?void 0:r.dataKey},e.payload))))}const fe=E(Y,q,I);return"development"===process.env.NODE_ENV&&console.info("The BarChart is also available as a copy-and-paste component. Visit https://tremor.so/docs/visualizations/bar-chart (This is only shown in development)"),n.createElement("div",Object.assign({ref:A,className:l("w-full h-80",oe)},ie),n.createElement(m,{className:"h-full w-full"},(null==j?void 0:j.length)?n.createElement(c,{barCategoryGap:Z,data:j,stackOffset:G?"sign":S?"expand":"none",layout:"vertical"===D?"vertical":"horizontal",onClick:ve&&(pe||ce)?()=>{de(void 0),ue(void 0),null==_||_(null)}:void 0,margin:{bottom:te?30:void 0,left:ae?20:void 0,right:ae?5:void 0,top:5}},W?n.createElement(d,{className:l("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:"vertical"!==D,vertical:"vertical"===D}):null,"vertical"!==D?n.createElement(p,{padding:le,hide:!z,dataKey:T,interval:V?"preserveStartEnd":P,tick:{transform:"translate(0, 6)"},ticks:V?[j[0][T],j[j.length-1][T]]:void 0,fill:"",stroke:"",className:l("mt-4 text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,angle:null==U?void 0:U.angle,dy:null==U?void 0:U.verticalShift,height:null==U?void 0:U.xAxisHeight,minTickGap:ee},te&&n.createElement(u,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},te)):n.createElement(p,{hide:!z,type:"number",tick:{transform:"translate(-3, 0)"},domain:fe,fill:"",stroke:"",className:l("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,tickFormatter:O,minTickGap:ee,allowDecimals:R,angle:null==U?void 0:U.angle,dy:null==U?void 0:U.verticalShift,height:null==U?void 0:U.xAxisHeight},te&&n.createElement(u,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},te)),"vertical"!==D?n.createElement(v,{width:M,hide:!B,axisLine:!1,tickLine:!1,type:"number",domain:fe,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:l("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:S?e=>`${(100*e).toString()} %`:O,allowDecimals:R},ae&&n.createElement(u,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},ae)):n.createElement(v,{width:M,hide:!B,dataKey:T,axisLine:!1,tickLine:!1,ticks:V?[j[0][T],j[j.length-1][T]]:void 0,type:"category",interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},fill:"",stroke:"",className:l("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content")},ae&&n.createElement(u,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},ae)),n.createElement(h,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{fill:"#d1d5db",opacity:"0.15"},content:X?({active:e,payload:a,label:o})=>re?n.createElement(re,{payload:null==a?void 0:a.map((e=>{var a;return Object.assign(Object.assign({},e),{color:null!==(a=me.get(e.dataKey))&&void 0!==a?a:t.Gray})})),active:e,label:o}):n.createElement(k,{active:e,payload:a,label:o,valueFormatter:O,categoryColors:me}):n.createElement(n.Fragment,null),position:{y:0}}),H?n.createElement(f,{verticalAlign:"top",height:ne,content:({payload:e})=>y({payload:e},me,se,pe,ve?e=>{return t=e,void(ve&&(t!==pe||ce?(ue(t),null==_||_({eventType:"category",categoryClicked:t})):(ue(void 0),null==_||_(null)),de(void 0)));var t}:void 0,J)}):null,N.map((e=>{var a;return n.createElement(g,{className:l(i(null!==(a=me.get(e))&&void 0!==a?a:t.Gray,o.background).fillColor,_?"cursor-pointer":""),key:e,name:e,type:"linear",stackId:G||S?"a":void 0,dataKey:e,fill:"",isAnimationActive:K,animationDuration:F,shape:e=>((e,t,a,o)=>{const{fillOpacity:l,name:i,payload:r,value:s}=e;let{x:m,width:c,y:d,height:p}=e;return"horizontal"===o&&p<0?(d+=p,p=Math.abs(p)):"vertical"===o&&c<0&&(m+=c,c=Math.abs(c)),n.createElement("rect",{x:m,y:d,width:c,height:p,opacity:t||a&&a!==i?w(t,Object.assign(Object.assign({},r),{value:s}))?l:.3:l})})(e,ce,pe,D),onClick:he})}))):n.createElement(b,{noDataText:$})))}));L.displayName="BarChart";export{L as default};
