'use client';
"use strict";var e=require("tslib"),t=require("../../../lib/constants.cjs"),a=require("../../../lib/theme.cjs"),l=require("../../../lib/tremorTwMerge.cjs"),r=require("../../../lib/utils.cjs"),i=require("react"),o=require("recharts"),n=require("../common/ChartLegend.cjs"),s=require("../common/ChartTooltip.cjs"),d=require("../common/NoData.cjs"),c=require("../common/utils.cjs");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=m(i);const f=u.default.forwardRef(((m,f)=>{const{data:v=[],categories:p=[],index:h,colors:g=a.themeColorRange,valueFormatter:y=r.defaultValueFormatter,layout:k="horizontal",stack:b=!1,relative:x=!1,startEndOnly:w=!1,animationDuration:E=900,showAnimation:L=!1,showXAxis:A=!0,showYAxis:C=!0,yAxisWidth:T=56,intervalType:j="equidistantPreserveStart",showTooltip:N=!0,showLegend:O=!0,showGridLines:q=!0,autoMinValue:D=!1,minValue:G,maxValue:M,allowDecimals:S=!0,noDataText:V,onValueChange:B,enableLegendSlider:F=!1,customTooltip:K,rotateLabelX:X,barCategoryGap:z,tickGap:P=5,xAxisLabel:Y,yAxisLabel:R,className:_,padding:H=(A||C?{left:20,right:20}:{left:0,right:0})}=m,W=e.__rest(m,["data","categories","index","colors","valueFormatter","layout","stack","relative","startEndOnly","animationDuration","showAnimation","showXAxis","showYAxis","yAxisWidth","intervalType","showTooltip","showLegend","showGridLines","autoMinValue","minValue","maxValue","allowDecimals","noDataText","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","barCategoryGap","tickGap","xAxisLabel","yAxisLabel","className","padding"]),I=K,[$,J]=i.useState(60),Q=c.constructCategoryColors(p,g),[U,Z]=u.default.useState(void 0),[ee,te]=i.useState(void 0),ae=!!B;function le(e,t,a){var l,r,i,o;a.stopPropagation(),B&&(c.deepEqual(U,Object.assign(Object.assign({},e.payload),{value:e.value}))?(te(void 0),Z(void 0),null==B||B(null)):(te(null===(r=null===(l=e.tooltipPayload)||void 0===l?void 0:l[0])||void 0===r?void 0:r.dataKey),Z(Object.assign(Object.assign({},e.payload),{value:e.value})),null==B||B(Object.assign({eventType:"bar",categoryClicked:null===(o=null===(i=e.tooltipPayload)||void 0===i?void 0:i[0])||void 0===o?void 0:o.dataKey},e.payload))))}const re=c.getYAxisDomain(D,G,M);return"development"===process.env.NODE_ENV&&console.info("The BarChart is also available as a copy-and-paste component. Visit https://tremor.so/docs/visualizations/bar-chart (This is only shown in development)"),u.default.createElement("div",Object.assign({ref:f,className:l.tremorTwMerge("w-full h-80",_)},W),u.default.createElement(o.ResponsiveContainer,{className:"h-full w-full"},(null==v?void 0:v.length)?u.default.createElement(o.BarChart,{barCategoryGap:z,data:v,stackOffset:b?"sign":x?"expand":"none",layout:"vertical"===k?"vertical":"horizontal",onClick:ae&&(ee||U)?()=>{Z(void 0),te(void 0),null==B||B(null)}:void 0,margin:{bottom:Y?30:void 0,left:R?20:void 0,right:R?5:void 0,top:5}},q?u.default.createElement(o.CartesianGrid,{className:l.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:"vertical"!==k,vertical:"vertical"===k}):null,"vertical"!==k?u.default.createElement(o.XAxis,{padding:H,hide:!A,dataKey:h,interval:w?"preserveStartEnd":j,tick:{transform:"translate(0, 6)"},ticks:w?[v[0][h],v[v.length-1][h]]:void 0,fill:"",stroke:"",className:l.tremorTwMerge("mt-4 text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,angle:null==X?void 0:X.angle,dy:null==X?void 0:X.verticalShift,height:null==X?void 0:X.xAxisHeight,minTickGap:P},Y&&u.default.createElement(o.Label,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},Y)):u.default.createElement(o.XAxis,{hide:!A,type:"number",tick:{transform:"translate(-3, 0)"},domain:re,fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,tickFormatter:y,minTickGap:P,allowDecimals:S,angle:null==X?void 0:X.angle,dy:null==X?void 0:X.verticalShift,height:null==X?void 0:X.xAxisHeight},Y&&u.default.createElement(o.Label,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},Y)),"vertical"!==k?u.default.createElement(o.YAxis,{width:T,hide:!C,axisLine:!1,tickLine:!1,type:"number",domain:re,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:x?e=>`${(100*e).toString()} %`:y,allowDecimals:S},R&&u.default.createElement(o.Label,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},R)):u.default.createElement(o.YAxis,{width:T,hide:!C,dataKey:h,axisLine:!1,tickLine:!1,ticks:w?[v[0][h],v[v.length-1][h]]:void 0,type:"category",interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content")},R&&u.default.createElement(o.Label,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},R)),u.default.createElement(o.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{fill:"#d1d5db",opacity:"0.15"},content:N?({active:e,payload:a,label:l})=>I?u.default.createElement(I,{payload:null==a?void 0:a.map((e=>{var a;return Object.assign(Object.assign({},e),{color:null!==(a=Q.get(e.dataKey))&&void 0!==a?a:t.BaseColors.Gray})})),active:e,label:l}):u.default.createElement(s.default,{active:e,payload:a,label:l,valueFormatter:y,categoryColors:Q}):u.default.createElement(u.default.Fragment,null),position:{y:0}}),O?u.default.createElement(o.Legend,{verticalAlign:"top",height:$,content:({payload:e})=>n({payload:e},Q,J,ee,ae?e=>{return t=e,void(ae&&(t!==ee||U?(te(t),null==B||B({eventType:"category",categoryClicked:t})):(te(void 0),null==B||B(null)),Z(void 0)));var t}:void 0,F)}):null,p.map((e=>{var i;return u.default.createElement(o.Bar,{className:l.tremorTwMerge(r.getColorClassNames(null!==(i=Q.get(e))&&void 0!==i?i:t.BaseColors.Gray,a.colorPalette.background).fillColor,B?"cursor-pointer":""),key:e,name:e,type:"linear",stackId:b||x?"a":void 0,dataKey:e,fill:"",isAnimationActive:L,animationDuration:E,shape:e=>((e,t,a,l)=>{const{fillOpacity:r,name:i,payload:o,value:n}=e;let{x:s,width:d,y:m,height:f}=e;return"horizontal"===l&&f<0?(m+=f,f=Math.abs(f)):"vertical"===l&&d<0&&(s+=d,d=Math.abs(d)),u.default.createElement("rect",{x:s,y:m,width:d,height:f,opacity:t||a&&a!==i?c.deepEqual(t,Object.assign(Object.assign({},o),{value:n}))?r:.3:r})})(e,U,ee,k),onClick:le})}))):u.default.createElement(d,{noDataText:V})))}));f.displayName="BarChart",module.exports=f;
