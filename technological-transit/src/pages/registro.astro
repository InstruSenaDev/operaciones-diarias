---
import Input from "../components/input.astro";
import Botones from "../components/botones.astro";
---

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Registro</title>
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
</head>
<body class="flex flex-col items-center justify-center min-h-screen bg-white-100" >
    <div
      class="flex flex-col justify-center items center w-screen ">
      <div class="grid grid-cols-2 gap-3 px-96">
        <div>
          <img class="w-full h-full object-cover" src="../img/img_registro.png"/>
        </div>
       
    <form id="formu" class="max-w-lg mx-auto p-4 bg-white shadow-md rounded-lg mt-10">
        <div class="mb-4">
            <label for="registroNombre" class="block text-gray-700">Nombre:</label>
            <input type="text" id="registroNombre" class="mt-1 block w-full px-4 py-3 border border-gray-300 bg-gray-200  rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <span id="nombreError" class="text-red-500 text-sm"></span>
        </div>
        <div class="mb-4">
            <label for="CorreoRegistro" class="block text-gray-700">Correo Electrónico:</label>
            <input type="email" id="CorreoRegistro" class="mt-1 block w-full px-4 py-3 border border-gray-300 bg-gray-200  rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <span id="correoError" class="text-red-500 text-sm"></span>
        </div>
        <div class="mb-4 relative">
            <label for="contrasenaRegistro" class="block text-gray-700">Contraseña:</label>
            <input type="password" id="contrasenaRegistro" class="mt-1 block w-full px-4 py-3 border border-gray-300 bg-gray-200  rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <span id="contrasenaError" class="text-red-500 text-sm"></span>
        </div>
        

        <div class="mb-4">
            <label for="confirmarContrasena" class="block text-gray-700">Confirmar Contraseña:</label>
            <input type="password" id="confirmarContrasena" class="mt-1 block w-full px-4 py-3 border border-gray-300 bg-gray-200  rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <span id="confirmarContrasenaError" class="text-red-500 text-sm"></span>
        </div>
        <div class="mb-4">
            <label for="numeroDc" class="block text-gray-700">Número de Documento:</label>
            <input type="text" id="numeroDc" class="mt-1 block w-full px-4 py-2 border border-gray-300 bg-gray-200  rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <span id="numeroDcError" class="text-red-500 text-sm"></span>
        </div>
        <div class="flex flex-col items-center justify-center"></div>
        <a href="inicio"><button type="submit" class="w-full bg-green-500 text-white py-2 rounded-lg">Registrarse</button></a>

        <div class="text-sm text-black-600 hover:text-black-700 justify-center">
            <a href="inicio" >
                       Iniciar Sesión
                      </a>
          </div>
        
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const formu = document.getElementById('formu');
            const nombre = document.getElementById('registroNombre');
            const correoRegistro = document.getElementById('CorreoRegistro');
            const contrasenaRegistro = document.getElementById('contrasenaRegistro');
            const confirmarContrasena = document.getElementById('confirmarContrasena');
            const numeroDc = document.getElementById('numeroDc');
            const nombreError = document.getElementById('nombreError');
            const correoError = document.getElementById('correoError');
            const contrasenaError = document.getElementById('contrasenaError');
            const confirmarContrasenaError = document.getElementById('confirmarContrasenaError');
            const numeroDcError = document.getElementById('numeroDcError');
            const togglePasswordRegistro = document.getElementById('togglePasswordRegistro');
    
            // Función para mostrar u ocultar la contraseña
            if (togglePasswordRegistro) {
                togglePasswordRegistro.addEventListener('click', function() {
                    if (contrasenaRegistro) {
                        const type = contrasenaRegistro.getAttribute('type') === 'password' ? 'text' : 'password';
                        contrasenaRegistro.setAttribute('type', type);
                    }
                });
            }
    
            // Validación del formulario al enviar
            if (formu) {
                formu.addEventListener('submit', function(event) {
                    let valid = true;
                    if (nombreError) nombreError.textContent = '';
                    if (correoError) correoError.textContent = '';
                    if (contrasenaError) contrasenaError.textContent = '';
                    if (confirmarContrasenaError) confirmarContrasenaError.textContent = '';
                    if (numeroDcError) numeroDcError.textContent = '';
    
                    // Validación del nombre
                    const nombreValue = nombre ? nombre.value.trim() : '';
                    if (!nombreValue || !/^[A-Za-z\s]+$/.test(nombreValue)) {
                        valid = false;
                        if (nombreError) nombreError.textContent = 'Ingrese un nombre válido.';
                    }
    
                    // Validación del correo electrónico
                    const correoValue = correoRegistro ? correoRegistro.value.trim() : '';
                    if (!correoValue) {
                        valid = false;
                        if (correoError) correoError.textContent = 'El correo electrónico es requerido.';
                    } else if (!/\S+@\S+\.\S+/.test(correoValue)) {
                        valid = false;
                        if (correoError) correoError.textContent = 'El correo electrónico debe tener formato válido.';
                    }
    
                    // Validación de la contraseña
                    const contrasenaValue = contrasenaRegistro ? contrasenaRegistro.value : '';
                    if (!contrasenaValue || contrasenaValue.length < 8 || !/[A-Z]/.test(contrasenaValue)) {
                        valid = false;
                        if (!contrasenaValue) {
                            if (contrasenaError) contrasenaError.textContent = 'La contraseña es requerida.';
                        } else if (contrasenaValue.length < 8) {
                            if (contrasenaError) contrasenaError.textContent = 'La contraseña debe tener al menos 8 caracteres.';
                        } else if (!/[A-Z]/.test(contrasenaValue)) {
                            if (contrasenaError) contrasenaError.textContent = 'La contraseña debe contener al menos una letra mayúscula.';
                        }
                    }
    
                    // Validación de la confirmación de contraseña
                    const confirmarContrasenaValue = confirmarContrasena ? confirmarContrasena.value : '';
                    if (contrasenaValue !== confirmarContrasenaValue) {
                        valid = false;
                        if (confirmarContrasenaError) confirmarContrasenaError.textContent = 'Las contraseñas no coinciden.';
                    }
    
                    // Validación del número de documento
                    const numeroDcValue = numeroDc ? numeroDc.value.trim() : '';
                    if (!numeroDcValue || isNaN(parseInt(numeroDcValue)) || numeroDcValue.length !== 10) {
                        valid = false;
                        if (numeroDcError) numeroDcError.textContent = 'Ingrese un número de documento válido de 10 dígitos.';
                    }
    
                    if (!valid) {
                        event.preventDefault();
                    } else {
                        // Aquí puedes redirigir al usuario a la página de destino después de enviar el formulario
                        window.location.href = '/inicio';
                    }
                });
            }
    
            // Función para resetear el formulario si se vuelve a cargar la página
            window.addEventListener('pageshow', function(event) {
                if (event.persisted && formu) {
                    formu.reset();
                }
            });
        });
    </script>
    
</body>
</html>



